"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").dataset.urlPrefix;let t=exports.licenceCategories;const c=document.querySelector("#container--licenceCategories"),a=()=>{if(0===t.length)return void(c.innerHTML='<div class="message is-warning"><p class="message-body">There are no licence categories available.</p></div>');const e=document.createElement("div");e.className="panel";for(const c of t){const t=document.createElement("a");t.className="panel-block is-block",t.dataset.licenceCategoryKey=c.licenceCategoryKey,t.innerHTML="<strong>"+cityssm.escapeHTML(c.licenceCategory)+'</strong><br /><div class="columns"><div class="column has-text-centered">'+(c.hasEffectiveFee?'<i class="fas fa-check has-text-success"></i><br /><span class="is-size-7">Effective Fee</span>':'<i class="fas fa-exclamation-triangle has-text-danger"></i><br /><span class="is-size-7">No Effective Fee</span>')+'</div><div class="column has-text-centered">'+(""===c.printEJS?'<i class="fas fa-exclamation-triangle has-text-danger"></i><br /><span class="is-size-7">No Print Template</span>':'<i class="fas fa-check has-text-success"></i><br /><span class="is-size-7">Print Template</span>')+"</div></div>",t.addEventListener("click",n),e.append(t)}c.innerHTML="",c.append(e)},s=t=>{cityssm.openHtmlModal("licenceCategory-edit",{onshow:c=>{c.querySelector("#licenceCategoryEdit--licenceCategoryKey").value=t;const a=document.querySelector("#licenceCategoryEdit--printEJS");for(const e of exports.printEJSList){const t=document.createElement("option");t.value=e,t.textContent=e,a.append(t)}cityssm.postJSON(e+"/admin/doGetLicenceCategory",{licenceCategoryKey:t},e=>{if(!e.success)return void bulmaJS.alert({message:"Error loading Licence Category.",contextualColorName:"danger"});const t=e.licenceCategory;c.querySelector("#licenceCategoryEdit--licenceCategory").value=t.licenceCategory,c.querySelector("#licenceCategoryEdit--bylawNumber").value=t.bylawNumber})},onshown:(e,t)=>{bulmaJS.toggleHtmlClipped()},onremoved:()=>{bulmaJS.toggleHtmlClipped()}})},n=e=>{e.preventDefault();const t=e.currentTarget.dataset.licenceCategoryKey;s(t)};a(),document.querySelector("#button--addLicenceCategory").addEventListener("click",()=>{let c;const n=n=>{n.preventDefault(),cityssm.postJSON(e+"/admin/doAddLicenceCategory",n.currentTarget,e=>{e.success&&(t=e.licenceCategories,a(),c(),s(e.licenceCategoryKey))})};cityssm.openHtmlModal("licenceCategory-add",{onshown:(e,t)=>{bulmaJS.toggleHtmlClipped(),c=t,e.querySelector("form").addEventListener("submit",n)},onremoved:()=>{bulmaJS.toggleHtmlClipped()}})})})();