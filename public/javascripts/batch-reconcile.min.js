"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").dataset.urlPrefix,t=document.querySelector("#batchReconcile--batchDate").value,a=document.querySelector("#batchReconcile--externalReceiptNumber"),n=e=>{const t=e.currentTarget.closest(".panel-block");return{panelBlockElement:t,successButtonElement:t.querySelector(".is-success-transaction-button"),failButtonElement:t.querySelector(".is-fail-transaction-button"),licenceId:t.dataset.licenceId,transactionIndex:t.dataset.transactionIndex,transactionAmount:t.dataset.transactionAmount}},c=c=>{if(c.preventDefault(),""===a.value)return void bulmaJS.alert({title:"Batch Receipt Number Required",message:"Enter a receipt number for the batch, and try again.",contextualColorName:"warning"});const s=n(c);bulmaJS.confirm({title:"Mark Transaction as Received Successfully",message:"Are you sure you want to mark this transaction as received successfully?",contextualColorName:"success",okButton:{text:"Yes, Received Succesfully",callbackFunction:()=>{cityssm.postJSON(e+"/batches/doMarkBatchTransactionSuccessful",{licenceId:s.licenceId,transactionIndex:s.transactionIndex,transactionAmount:s.transactionAmount,batchDate:t,externalReceiptNumber:a.value},e=>{e.success?(s.successButtonElement.disabled=!0,s.successButtonElement.classList.remove("is-outlined"),s.failButtonElement.disabled=!1,s.failButtonElement.classList.add("is-outlined")):bulmaJS.alert({title:"Transaction Not Updated",message:"Please try again.",contextualColorName:"danger"})})}}})},s=document.querySelectorAll(".is-success-transaction-button");for(const e of s)e.addEventListener("click",c);const o=c=>{if(c.preventDefault(),""===a.value)return void bulmaJS.alert({title:"Batch Receipt Number Required",message:"Enter a receipt number for the batch, and try again.",contextualColorName:"warning"});const s=n(c);bulmaJS.confirm({title:"Mark Transaction as Failed",message:"Are you sure you want to mark this transaction as failed?",contextualColorName:"warning",okButton:{text:"Yes, It Failed",callbackFunction:()=>{cityssm.postJSON(e+"/batches/doMarkBatchTransactionFailed",{licenceId:s.licenceId,transactionIndex:s.transactionIndex,transactionAmount:s.transactionAmount,batchDate:t,externalReceiptNumber:a.value},e=>{e.success?(s.failButtonElement.disabled=!0,s.failButtonElement.classList.remove("is-outlined"),s.successButtonElement.disabled=!1,s.successButtonElement.classList.add("is-outlined")):bulmaJS.alert({title:"Transaction Not Updated",message:"Please try again.",contextualColorName:"danger"})})}}})},l=document.querySelectorAll(".is-fail-transaction-button");for(const e of l)e.addEventListener("click",o)})();