"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").dataset.urlPrefix;let a=!1;document.querySelector("#yearEnd--backupDatabase").addEventListener("click",t=>{t.preventDefault();bulmaJS.confirm({title:"Backup Database",message:"To ensure all data is backed up properly, please make sure all users with update privileges avoid making changes while the backup is running.",contextualColorName:"info",okButton:{text:"Backup Database Now",callbackFunction:()=>{cityssm.postJSON(e+"/admin/doBackupDatabase",{},e=>{e.success&&(bulmaJS.alert({title:"Database Backed Up Successfully",message:"Database backed up as <strong>"+cityssm.escapeHTML(e.fileName)+"</strong>.",messageIsHtml:!0,contextualColorName:"success"}),a=!0)})}}})});let t=!1;document.querySelector("#yearEnd--refreshDatabase").addEventListener("click",s=>{s.preventDefault();const o=()=>{cityssm.postJSON(e+"/admin/doRefreshDatabase",{},e=>{e.success&&(bulmaJS.alert({title:"Database Refreshed Successfully",message:"Be sure to verify your data before making significant changes.",contextualColorName:"success"}),t=!0)})},r=()=>{bulmaJS.confirm({title:"Refresh Database",message:"Are you sure you are ready to refresh the database?",contextualColorName:"warning",okButton:{text:"Yes, Refresh the Database Now",callbackFunction:o}})};t?bulmaJS.confirm({title:"Refresh Already Ran",message:"Refreshing again will delete all of the records from the database.  Are you sure you want to refresh again?",contextualColorName:"danger",okButton:{text:"Yes, Refresh Again",callbackFunction:r}}):a?r():bulmaJS.confirm({title:"No Backup Detected",message:"Are you sure you want to proceed without backing up the database first?",contextualColorName:"danger",okButton:{text:"Yes, Proceed Without a Backup",callbackFunction:r}})})})();