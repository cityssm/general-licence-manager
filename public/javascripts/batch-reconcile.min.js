"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("main").dataset.urlPrefix,t=document.querySelector("#batchReconcile--batchDate").value,n=document.querySelector("#batchReconcile--externalReceiptNumber"),a=a=>{if(a.preventDefault(),""===n.value)return void bulmaJS.alert({title:"Batch Receipt Number Required",message:"Enter a receipt number for the batch, and try again.",contextualColorName:"warning"});const c=(e=>{const t=e.currentTarget.closest(".panel-block");return{panelBlockElement:t,successButtonElement:t.querySelector(".is-success-transaction-button"),failButtonElement:t.querySelector(".is-fail-transaction-button"),licenceId:t.dataset.licenceId,transactionIndex:t.dataset.transactionIndex,transactionAmount:t.dataset.transactionAmount}})(a);bulmaJS.confirm({title:"Mark Transaction as Received Successfully",message:"Are you sure you want to mark this transaction as received successfully?",contextualColorName:"success",okButton:{text:"Yes, Received Succesfully",callbackFunction:()=>{cityssm.postJSON(e+"/batches/doMarkBatchTransactionSuccessful",{licenceId:c.licenceId,transactionIndex:c.transactionIndex,transactionAmount:c.transactionAmount,batchDate:t,externalReceiptNumber:n.value},e=>{e.success?(c.successButtonElement.disabled=!0,c.successButtonElement.classList.remove("is-outlined"),c.failButtonElement.disabled=!1,c.failButtonElement.classList.add("is-outlined")):bulmaJS.alert({title:"Transaction Not Updated",message:"Please try again.",contextualColorName:"danger"})})}}})},c=document.querySelectorAll(".is-success-transaction-button");for(const e of c)e.addEventListener("click",a);const s=e=>{},o=document.querySelectorAll(".is-fail-transaction-button");for(const e of o)e.addEventListener("click",s)})();